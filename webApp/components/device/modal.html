<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="/static/dist/components/device/css/device.css">
    <script src="/static/dist/components/device/js/device.js"></script>
</head>
<body>
<div id="deviceSelector" class="deviceSelector ieExtend">
    <div id="modelView" class="model"></div>
    <div class="rightSilderBar">
        <div class="before">展开</div>
        <div class="headerBar"></div>
        <div class="contentbar">
            <table  cellspacing="0" >
                <thead>
                <tr>
                    <th class="checkbox"></th>
                    <th>构件编码</th>
                </tr>
                </thead>
                <tbody class="contentList">
                <!--<tr>
                    <td class="checkbox">
                        <input type="checkbox">
                    </td>
                    <td class="colItem"></td>
                </tr>-->
                </tbody>
            </table>
        </div>
        <div class="footBar">
            <div class="footPage">
                <div class="sumDesc"></div>
                <div class="listPagination">正在加载...</div>
            </div>
            <div class="footTool">
                <a class="mmh-btn confirm">确认</a>
            </div>
        </div>
    </div>
</div>
<script>
    function GetRequest() {
        var url = location.search; //获取url中"?"符后的字串
        var theRequest = new Object();
        if (url.indexOf("?") != -1) {
            var str = url.substr(1);
            strs = str.split("&");
            for (var i = 0; i < strs.length; i++) {
                theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
            }
        }
        return theRequest;
    }
    var Request = GetRequest();

    var _host='http://' + location.host;

    $("#deviceSelector").css({
        height:Request.height,
        width:Request.width
    })
    var viewer=null;
    function init(data){
        data=JSON.parse(data);
        viewer = new DeviceSelection({
            sourceId: Request.sourceId,
            etag: Request.etag,
            projectId: Request.projectId,
            projectVersionId: Request.projectVersionId,
            token: Request.token,
            appKey: Request.appKey,
            host: _host,
            height:Request.height,
            width:Request.width,
            data:data.data,
            isShowConfirm:data.setting.isShowConfirm,
            selectedData:data.selectedData,
            //res 选择的检查点数据
            callback: function (res) {
            }
        });
    }

    function getData(){
        return JSON.stringify(viewer.getData());
    }
    window.onload=function(){
        if (navigator.userAgent.indexOf("QtWebEngine/5.7.0") > -1) {
            window.open("/?commType=onLoad");
        }
    }
</script>
</body>
</html>