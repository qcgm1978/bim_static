<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>模型选择器</title>
    <script src="http://bim.wanda-dev.cn/static/dist/components/modelSelection/js/modelSelection.js"></script>
</head>

<body>
    <script type="text/javascript">
     function GetRequest() {   
       var url = location.search; //获取url中"?"符后的字串   
       var theRequest = new Object();   
       if (url.indexOf("?") != -1) {   
          var str = url.substr(1);   
          strs = str.split("&");   
          for(var i = 0; i < strs.length; i ++) {   
             theRequest[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1]);   
          }   
       }   
       return theRequest;   
    } 
    var Request = GetRequest();  
    var viewer = new ModelSelection({
        type:Request.type,
        sourceId: Request.sourceId,
        etag: Request.etag,
        projectId:Request.projectId,
        projectVersionId: Request.projectVersionId,
        callback: function(components, markers) {
        }
    });

    function getData(){
        var data={
            components:viewer.viewData,
            markers:viewer.Project.Settings.markers
        }
        var result=JSON.stringify(data); 
        return result;
    }
    </script>
</body>

</html>
